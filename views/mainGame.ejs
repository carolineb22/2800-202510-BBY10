<%- include("templates/header") %>
<div class="container">
    <!-- Left Sidebar with centered text -->
    <aside class="sidebar left">
        <p class="sidebar-text">Kepler 22-b</p>
        <div id="global-resources">
            <p>Global Resources</p>
        </div>
        <div id="sector-resources">
            <p>Sector Resources</p>
        </div>
        <button id="incrementer">Incrementer</button>
    </aside>

    <main class="map">
        
        <div id="gerge" class="row">
            <hr>
            <button class="hud-button" id="cycle_sector">Cycle sector!</button>
            <hr>
            <br><br><br>
            
        </div>
    

    </main>

    

    <!-- Right Sidebar with centered text -->
    <aside class="sidebar right">
        <p class="sidebar-text">Build Menu</p>
        <hr>
        <br>
        <div id="build_sidebar">

        </div>
        
    </aside>
</div>

<!-- Bottom Bar with Upgrades and Build Buttons -->
<div class="bottom-bar">
    <form action='/main/techTree' method='get'>
        <button class="nav-button left">Upgrades</button>
    </form>
    <form action='/main/build' method='get'>
        <button class="nav-button right">Build</button>
    </form>
</div>

<!-- Settings button in top-left -->
<div class="settings-button">
    <i class="material-icons">settings</i>
</div>

<!-- Dropdown Menu -->
<div class="dropdown-menu" id="settingsMenu">
    <button class="dropdown-item" onclick="window.location.assign('/logout')">Log Out</button>
    <button class="dropdown-item" onclick="save()">Save</button>
    <button class="dropdown-item">Another Option</button>
</div>

<!-- Top HUD with time display and buttons -->
<div class="top-hud">
    <span class="time-display">12:34</span>
    <div class="hud-controls">
        <!-- Play/Pause Button -->
        <input type="checkbox" class="toggle-play" id="toggle-play" />
        <label class="hud-button" for="toggle-play" id="play_state">
            <i class="material-icons play">play_arrow</i> <!-- Play icon -->
            <i class="material-icons pause">pause</i> <!-- Pause icon -->
        </label>

        <!-- Speed Change Button -->
        <button class="hud-button" id="fast_forward"><i class="material-icons">fast_forward</i></button>
    </div>
</div>

<template id="resource">
    <p class="resource_display"></p>
</template>
<template id="sector">
    <div class="sector_display">
        <p class="sector_name"></p>
        <br>
        <div class="sector_details">

        </div>
    </div>

</template>
<template id="building">
    <div class="building_display">
        <p class="building_name"></p>
        <div class="building_production">
    
        </div>
        <div class="building_consumption">
    
        </div>
    </div>
    
</template>
<template id="geoelement">
    <div class="geoelement_display">
        <br>
        <p class="geoelement_name"></p>
        <button class="hud-button geoelement_build">Build</button>
        <p class="depletion"></p>
        <div class="passive_production">

        </div>
        <div class="buildings">

        </div>
        <br>
        <hr>
    </div>
</template>
<template id="build_menu">
    <hr>
    <div class="row build_tabs">

    </div>
    <hr>
    <br>
    <div class="building_options_display">

    </div>
</template>

<script>
    const settingsBtn = document.querySelector('.settings-button');
    const dropdownMenu = document.getElementById('settingsMenu');

    settingsBtn.addEventListener('click', (e) => {
        e.stopPropagation(); // Prevent click from reaching body
        dropdownMenu.classList.toggle('show');
    });

    // Hide dropdown when clicking outside
    document.body.addEventListener('click', () => {
        dropdownMenu.classList.remove('show');
    });

    // Declare variables for mainGame.js
    let unHTMLedResources = JSON.parse("\"<%=resources%>\"");
    let stringifiedResources = unHTMLedResources.replace(/&#34;/g,'"');
    var databaseResources = JSON.parse(stringifiedResources) || {};
    let unHTMLedSectors = JSON.parse("\"<%=sectors%>\"");
    let stringifiedSectors = unHTMLedSectors.replace(/&#34;/g,'"');
    var databaseSectors = JSON.parse(stringifiedSectors);
    console.log(databaseResources);
    console.log(databaseSectors);
</script>
<script src="scripts/mainGame.js"></script>
<%- include("templates/footer")%>
